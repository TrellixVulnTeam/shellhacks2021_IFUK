{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sanyagoyal/Desktop/React/shellhacks/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sanyagoyal/Desktop/React/shellhacks/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sanyagoyal/Desktop/React/shellhacks/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import Header from'../components/Header';import{useHistory}from'react-router-dom';import{ChatEngine}from'react-chat-engine';import{auth}from\"../firebase\";import Button from\"@material-tailwind/react/Button\";import{useAuth}from'../contexts/AuthContext';import axios from'axios';//import LogoutIcon from '@material-ui/icons/Logout';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chats(){var history=useHistory();var _useAuth=useAuth(),user=_useAuth.user;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];//console.log(user);\nvar handleLogout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return auth.signOut();case 2:history.push('/');case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleLogout(){return _ref.apply(this,arguments);};}();/*const getFile= async(url)=>{\n        const response=await fetch(url);\n        const data=response.blob();\n\n        return new File([data],'userPhoto.jpg',{type:'image/jpeg'});\n\n    }\n   useEffect(()=>{\n       if(!user){\n        history.push('/');\n        return;\n       }\n       axios.get('https://api.chatengine.io//users/me',{\n           headers:{\n            \"project-id\":\"f5c4182d-069e-4b2a-88ab-a1cfd27f671d\",\n            \"user-name\":user.email,\n            \"user-secret\":user.uid,\n           }\n       }).then(()=>{\n           setLoading(false);\n\n       }).catch(()=>{\n           let formdata= new FormData();\n           formdata.append('email',user.email);\n           formdata.append('username',user.displayName);\n           formdata.append('secret',user.uid);\n\n           getFile(user.photoURL).then((avatar)=>{\n               formdata.append('avatar',avatar,avatar.name);\n               axios.post('https://api.chatengine.io/users',formdata,\n               {headers:\n                {\"private-key\":\"b5511b00-2aa3-4ad3-bb6a-95bf97e28b5d\"}\n\n               })\n           .then(()=>setLoading(false)).catch((error)=>console.log(error))\n       })\n    })\n\n   },[user,history]);\n\n   if(!user || loading)return 'Loading....';*/return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Button,{color:\"gray\",buttonType:\"outline\",iconOnly:true,rounded:true,ripple:\"dark\",onClick:handleLogout,className:\"border-0\",children:\"Log Out\"}),/*#__PURE__*/_jsx(ChatEngine,{height:\"100vh\",projectID:\"f5c4182d-069e-4b2a-88ab-a1cfd27f671d\"//userName={user.email}\n//userSecret={user.uid}\n,userName:\"sanyagoyal2000\",userSecret:\"123123\"})]});}export default Chats;","map":{"version":3,"sources":["/Users/sanyagoyal/Desktop/React/shellhacks/src/pages/chats.js"],"names":["useState","useEffect","Header","useHistory","ChatEngine","auth","Button","useAuth","axios","Chats","history","user","loading","setLoading","handleLogout","signOut","push"],"mappings":"geAAA,OAAQA,QAAR,CAAiBC,SAAjB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,OAAQC,UAAR,KAAyB,mBAAzB,CACA,OAAQC,IAAR,KAAmB,aAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iCAAnB,CACA,OAAQC,OAAR,KAAsB,yBAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA;wFAEA,QAASC,CAAAA,KAAT,EAAiB,CACb,GAAMC,CAAAA,OAAO,CAAEP,UAAU,EAAzB,CADa,aAGCI,OAAO,EAHR,CAGNI,IAHM,UAGNA,IAHM,eAIcX,QAAQ,CAAC,IAAD,CAJtB,wCAINY,OAJM,eAIEC,UAJF,eAKT;AACJ,GAAMC,CAAAA,YAAY,0FAAC,yJACTT,CAAAA,IAAI,CAACU,OAAL,EADS,QAEfL,OAAO,CAACM,IAAR,CAAa,GAAb,EAFe,sDAAD,kBAAZF,CAAAA,YAAY,0CAAlB,CAMA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CACI,mBACI,oCACI,KAAC,MAAD,IADJ,cAEI,KAAC,MAAD,EACA,KAAK,CAAC,MADN,CAEA,UAAU,CAAC,SAFX,CAGA,QAAQ,CAAE,IAHV,CAIA,OAAO,CAAE,IAJT,CAKA,MAAM,CAAC,MALP,CAMA,OAAO,CAAEA,YANT,CAOA,SAAS,CAAC,UAPV,qBAFJ,cAcI,KAAC,UAAD,EACJ,MAAM,CAAC,OADH,CAEJ,SAAS,CAAC,sCACV;AACA;AAJI,CAKJ,QAAQ,CAAC,gBALL,CAMJ,UAAU,CAAC,QANP,EAdJ,GADJ,CA4BH,CAED,cAAeL,CAAAA,KAAf","sourcesContent":["import {useState,useEffect} from 'react';\nimport Header from '../components/Header';\nimport {useHistory} from 'react-router-dom';\nimport {ChatEngine} from 'react-chat-engine';\nimport {auth} from \"../firebase\";\nimport Button from \"@material-tailwind/react/Button\";\nimport {useAuth} from '../contexts/AuthContext';\nimport axios from 'axios';\n//import LogoutIcon from '@material-ui/icons/Logout';\n\nfunction Chats() {\n    const history =useHistory();\n\n    const {user} =useAuth();\n    const [loading,setLoading]=useState(true);\n        //console.log(user);\n    const handleLogout=async () =>{\n        await auth.signOut();\n        history.push('/');\n\n    }\n\n    /*const getFile= async(url)=>{\n        const response=await fetch(url);\n        const data=response.blob();\n\n        return new File([data],'userPhoto.jpg',{type:'image/jpeg'});\n\n    }\n   useEffect(()=>{\n       if(!user){\n        history.push('/');\n        return;\n       }\n       axios.get('https://api.chatengine.io//users/me',{\n           headers:{\n            \"project-id\":\"f5c4182d-069e-4b2a-88ab-a1cfd27f671d\",\n            \"user-name\":user.email,\n            \"user-secret\":user.uid,\n           }\n       }).then(()=>{\n           setLoading(false);\n\n       }).catch(()=>{\n           let formdata= new FormData();\n           formdata.append('email',user.email);\n           formdata.append('username',user.displayName);\n           formdata.append('secret',user.uid);\n\n           getFile(user.photoURL).then((avatar)=>{\n               formdata.append('avatar',avatar,avatar.name);\n               axios.post('https://api.chatengine.io/users',formdata,\n               {headers:\n                {\"private-key\":\"b5511b00-2aa3-4ad3-bb6a-95bf97e28b5d\"}\n\n               })\n           .then(()=>setLoading(false)).catch((error)=>console.log(error))\n       })\n    })\n\n   },[user,history]);\n\n   if(!user || loading)return 'Loading....';*/\n    return (\n        <div>\n            <Header/>\n            <Button\n            color=\"gray\"\n            buttonType=\"outline\"\n            iconOnly={true}\n            rounded={true}\n            ripple=\"dark\"\n            onClick={handleLogout}\n            className=\"border-0\"\n            >Log Out\n                \n            </Button>\n            \n            <ChatEngine\n        height=\"100vh\"\n        projectID=\"f5c4182d-069e-4b2a-88ab-a1cfd27f671d\"\n        //userName={user.email}\n        //userSecret={user.uid}\n        userName=\"sanyagoyal2000\"\n        userSecret=\"123123\"\n        \n\n        \n        />\n        </div>\n    )\n}\n\nexport default Chats\n"]},"metadata":{},"sourceType":"module"}